<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emotionix</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>Emotionix</h2>
    <div class="menu">
      <button class="menu-item active">Main Chat</button>
      <button class="menu-item" onclick="switchAI('alphaStudy')">Alpha Study AI</button>
      <button class="menu-item" onclick="switchAI('alphaExam')">Alpha Exam AI</button>
    </div>
    <div class="bottom">
      <p class="username">ðŸ‘¤ Naman (Free)</p>
    </div>
  </div>

  <!-- Main Chat Container -->
  <div class="chat-container">
    <header class="chat-header">
      <h1>Emotionix</h1>
      <select id="aiMode" class="ai-select" onchange="changeMode()">
        <option value="main">Emotionix</option>
        <option value="alphaStudy">Alpha Study AI</option>
        <option value="alphaExam">Alpha Exam AI</option>
      </select>
    </header>

    <div id="chat-window" class="chat-window">
      <div class="message bot">ðŸ‘‹ Hi, Iâ€™m Emotionix! How are you feeling today?</div>
    </div>

    <div class="chat-input">
      <input type="text" id="user-input" placeholder="Type your message..." onkeypress="handleKey(event)">
      <button onclick="sendMessage()">âž¤</button>
    </div>
  </div>

  <script>
    let aiMode = "main";

    function switchAI(mode) {
      aiMode = mode;
      document.getElementById('aiMode').value = mode;
      addBotMessage(`Switched to ${mode === 'alphaStudy' ? 'Alpha Study AI ðŸ“š' : 'Alpha Exam AI ðŸ§ '}`);
    }

    function changeMode() {
      aiMode = document.getElementById('aiMode').value;
      addBotMessage(`Youâ€™re now chatting with ${aiMode === 'alphaStudy' ? 'Alpha Study AI ðŸ“š' : aiMode === 'alphaExam' ? 'Alpha Exam AI ðŸ§ ' : 'Emotionix ðŸ’¬'}`);
    }

    function handleKey(event) {
      if (event.key === "Enter") sendMessage();
    }

    function sendMessage() {
      const input = document.getElementById('user-input');
      const message = input.value.trim();
      if (!message) return;
      addUserMessage(message);
      input.value = "";
      setTimeout(() => simulateResponse(message), 800);
    }

    function addUserMessage(text) {
      const chat = document.getElementById('chat-window');
      const msg = document.createElement('div');
      msg.className = "message user";
      msg.textContent = text;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function addBotMessage(text) {
      const chat = document.getElementById('chat-window');
      const msg = document.createElement('div');
      msg.className = "message bot";
      msg.textContent = text;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function simulateResponse(userMessage) {
      let reply;
      if (aiMode === "alphaStudy") {
        reply = "ðŸ“˜ Letâ€™s focus on your studies. What board and grade are you in?";
      } else if (aiMode === "alphaExam") {
        reply = "ðŸ§© Please upload your topic or PDF â€” Iâ€™ll generate an exam paper for you!";
      } else {
        reply = "ðŸ’¬ Thatâ€™s interesting! Tell me more.";
      }
      addBotMessage(reply);
    }
  </script>
</body>
</html>
