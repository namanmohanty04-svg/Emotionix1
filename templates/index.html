<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Emotionix</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2 id="sidebarTitle">Emotionix</h2>
    <div class="menu">
      <button class="menu-item active" onclick="switchAI('emotionix')">Main Chat</button>
      <button class="menu-item" onclick="switchAI('alphaStudy')">Alpha Study AI</button>
      <button class="menu-item" onclick="switchAI('alphaExam')">Alpha Exam AI</button>
    </div>

    <div class="bottom">
      <p class="login-text">ğŸ” <a href="#" class="login-link">Login</a> | <a href="#" class="login-link">Sign Up</a></p>
      <p class="username">ğŸ‘¤ Guest User</p>
    </div>
  </div>

  <!-- Main Chat -->
  <div class="chat-container">
    <header class="chat-header">
      <h1 id="headerTitle">Emotionix</h1>
      <select id="aiMode" class="ai-select" onchange="changeMode()">
        <option value="emotionix">Emotionix</option>
        <option value="alphaStudy">Alpha Study AI</option>
        <option value="alphaExam">Alpha Exam AI</option>
      </select>
    </header>

    <div id="chat-window" class="chat-window">
      <div class="message bot">ğŸ‘‹ Hi, Iâ€™m Emotionix! How are you feeling today?</div>
    </div>

    <div class="chat-input">
      <input type="text" id="user-input" placeholder="Type your message..." onkeypress="handleKey(event)">
      <button onclick="sendMessage()">â¤</button>
    </div>
  </div>

  <script>
    let aiMode = "emotionix";

    function switchAI(mode) {
      aiMode = mode;
      document.getElementById('aiMode').value = mode;

      const aiName = getAIName(mode);
      document.getElementById('headerTitle').textContent = aiName;
      document.getElementById('sidebarTitle').textContent = aiName;

      document.querySelectorAll(".menu-item").forEach(btn => btn.classList.remove("active"));
      document.querySelector(`.menu-item[onclick="switchAI('${mode}')"]`).classList.add("active");

      addBotMessage(`ğŸ”„ Switched to ${aiName}`);
    }

    function getAIName(mode) {
      if (mode === "alphaStudy") return "Alpha Study AI ğŸ“š";
      if (mode === "alphaExam") return "Alpha Exam AI ğŸ§ ";
      return "Emotionix ğŸ’¬";
    }

    function changeMode() {
      switchAI(document.getElementById('aiMode').value);
    }

    function handleKey(event) {
      if (event.key === "Enter") sendMessage();
    }

    function sendMessage() {
      const input = document.getElementById('user-input');
      const message = input.value.trim();
      if (!message) return;
      addUserMessage(message);
      input.value = "";
      simulateResponse(message);
    }

    function addUserMessage(text) {
      const chat = document.getElementById('chat-window');
      const msg = document.createElement('div');
      msg.className = "message user";
      msg.textContent = text;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function addBotMessage(text) {
      const chat = document.getElementById('chat-window');
      const msg = document.createElement('div');
      msg.className = "message bot";
      msg.textContent = text;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    // Simulate responses for each AI mode
    function simulateResponse(userMessage) {
      let reply;

      if (aiMode === "emotionix") {
        const replies = [
          "ğŸ’¬ That sounds interesting. Tell me more!",
          "ğŸ˜Š Iâ€™m here for you â€” how are you feeling about that?",
          "ğŸ’– That must be tough, but youâ€™re doing great.",
          "ğŸ˜„ I love hearing from you! Whatâ€™s on your mind?"
        ];
        reply = replies[Math.floor(Math.random() * replies.length)];
      }

      else if (aiMode === "alphaStudy") {
        reply = `ğŸ“˜ Searching study materials for â€œ${userMessage}â€...\nFound a helpful summary: â€œ${userMessage} is a key concept involving deep understanding of related topics. Letâ€™s dive into examples!â€`;
      }

      else if (aiMode === "alphaExam") {
        reply = `ğŸ§© Generating a quick exam based on â€œ${userMessage}â€:\n1ï¸âƒ£ Define ${userMessage}.\n2ï¸âƒ£ Explain its importance.\n3ï¸âƒ£ Give one real-life example.`;
      }

      setTimeout(() => addBotMessage(reply), 800);
    }
  </script>
</body>
</html>
